{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\songe\\\\Documents\\\\Project\\\\SummerProject\\\\StarlingUI-frontend\\\\src\\\\components\\\\user\\\\User.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from 'react';\nimport { ProjectContext } from '../App';\nimport LoginIn from './LoginIn';\nimport UserDropDown from './UserDropDown';\nimport CreateAccount from './CreateAccount';\nimport ManageAccount from './ManageAccount';\nimport UnsavedWarning from './UnsavedWarning';\nimport account_icon from '../../css/img/account-svgrepo-com.svg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function User(_ref) {\n  _s();\n\n  let {\n    currentUser,\n    userSignIn,\n    setUserSignIn\n  } = _ref;\n  const {\n    projects,\n    currentUserID,\n    handleCurrentUser\n  } = useContext(ProjectContext);\n  const [userManagement, setUserManagement] = useState(false);\n  const [createNewAccount, setCreateNewAccount] = useState(false);\n  const [accountManagement, setAccountManagement] = useState(false);\n  const [unsavedWarning, setUnsavedWarning] = useState(false);\n  const [unsavedProjectIDs, setUnsavedProjectIDs] = useState([]);\n\n  function handleCreateNewAccount(clickEvent) {\n    setCreateNewAccount(clickEvent);\n  }\n\n  function handleUserSignIn(clickEvent) {\n    setUserSignIn(clickEvent);\n  }\n\n  function handleUserManagement() {\n    if (userManagement === true) {\n      setUserManagement(false);\n    } else {\n      setUserManagement(true);\n    }\n  }\n\n  function handleAccountManagement(clickEvent) {\n    console.log(\"manage account\");\n    setAccountManagement(clickEvent);\n  }\n\n  function handleUserSignOut() {\n    console.log(\"sign out\"); //check if all his/her projects are saved\n\n    checkAllSaved();\n  }\n\n  function checkAllSaved() {\n    let unsavedArray = [];\n\n    for (let i = 0; i < projects.length; i++) {\n      if (projects[i].memberIDs.includes(currentUserID) && projects[i].saved === false) {\n        unsavedArray = [...unsavedArray, projects[i].id];\n      }\n    }\n\n    console.log(unsavedArray);\n\n    if (unsavedArray.length !== 0) {\n      setUnsavedWarning(true);\n      setUnsavedProjectIDs(unsavedArray); //show warning\n    } else {\n      console.log(\"all saved\");\n      setUnsavedWarning(false);\n      handleCurrentUser(undefined);\n    }\n  }\n\n  function showUser() {\n    if (currentUser === undefined) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"btn btn-nav\",\n          onClick: () => handleUserSignIn(true),\n          children: \"Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(LoginIn, {\n          trigger: userSignIn,\n          setTrigger: setUserSignIn,\n          handleCreateNewAccount: handleCreateNewAccount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(CreateAccount, {\n          trigger: createNewAccount,\n          setTrigger: setCreateNewAccount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true);\n    } else {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"btn btn-nav\",\n          onClick: () => {\n            handleUserManagement();\n            handleUserSignIn(false);\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"account-icon\",\n            src: account_icon,\n            alt: \"Account Icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 21\n          }, this), currentUser.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(UserDropDown, {\n          trigger: userManagement,\n          setTrigger: setUserManagement,\n          handleAccountManagement: handleAccountManagement,\n          handleUserSignOut: handleUserSignOut\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(ManageAccount, {\n          trigger: accountManagement,\n          setTrigger: setAccountManagement,\n          currentUser: currentUser\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(UnsavedWarning, {\n          trigger: unsavedWarning,\n          setTrigger: setUnsavedWarning,\n          unsavedProjectIDs: unsavedProjectIDs\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: showUser()\n  }, void 0, false);\n}\n\n_s(User, \"CrQWjEeL2y25Up0oQK+wKgbQqqw=\");\n\n_c = User;\n\nvar _c;\n\n$RefreshReg$(_c, \"User\");","map":{"version":3,"names":["React","useState","useContext","ProjectContext","LoginIn","UserDropDown","CreateAccount","ManageAccount","UnsavedWarning","account_icon","User","currentUser","userSignIn","setUserSignIn","projects","currentUserID","handleCurrentUser","userManagement","setUserManagement","createNewAccount","setCreateNewAccount","accountManagement","setAccountManagement","unsavedWarning","setUnsavedWarning","unsavedProjectIDs","setUnsavedProjectIDs","handleCreateNewAccount","clickEvent","handleUserSignIn","handleUserManagement","handleAccountManagement","console","log","handleUserSignOut","checkAllSaved","unsavedArray","i","length","memberIDs","includes","saved","id","undefined","showUser","name"],"sources":["C:/Users/songe/Documents/Project/SummerProject/StarlingUI-frontend/src/components/user/User.js"],"sourcesContent":["import React, {useState, useContext} from 'react'\r\nimport { ProjectContext } from '../App';\r\nimport LoginIn from './LoginIn';\r\nimport UserDropDown from './UserDropDown';\r\nimport CreateAccount from './CreateAccount';\r\nimport ManageAccount from './ManageAccount';\r\nimport UnsavedWarning from './UnsavedWarning';\r\nimport account_icon from '../../css/img/account-svgrepo-com.svg';\r\n\r\nexport default function User( {currentUser, userSignIn, setUserSignIn} ) {\r\n\r\n    const {projects, currentUserID, handleCurrentUser} = useContext(ProjectContext);\r\n\r\n    const [userManagement, setUserManagement] = useState(false);\r\n    const [createNewAccount, setCreateNewAccount] = useState(false);\r\n    const [accountManagement, setAccountManagement] = useState(false);\r\n\r\n    const [unsavedWarning, setUnsavedWarning] = useState(false);\r\n    const [unsavedProjectIDs, setUnsavedProjectIDs] = useState([]);\r\n\r\n    function handleCreateNewAccount(clickEvent){\r\n        setCreateNewAccount(clickEvent);\r\n    }\r\n\r\n    function handleUserSignIn(clickEvent){\r\n        setUserSignIn(clickEvent);\r\n    }\r\n\r\n    function handleUserManagement(){\r\n        if(userManagement===true){\r\n            setUserManagement(false);\r\n        }else{\r\n            setUserManagement(true);\r\n        }\r\n    }\r\n\r\n    function handleAccountManagement(clickEvent){\r\n        console.log(\"manage account\");\r\n        setAccountManagement(clickEvent)\r\n    }\r\n\r\n    function handleUserSignOut(){\r\n        console.log(\"sign out\");\r\n        //check if all his/her projects are saved\r\n        checkAllSaved();\r\n    }\r\n\r\n    function checkAllSaved(){\r\n        let unsavedArray=[];\r\n        for(let i=0;i<projects.length;i++){\r\n            if(projects[i].memberIDs.includes(currentUserID) && projects[i].saved===false){\r\n                unsavedArray = [...unsavedArray, projects[i].id];\r\n            }\r\n        }\r\n        console.log(unsavedArray);\r\n        if(unsavedArray.length!==0){\r\n            setUnsavedWarning(true);\r\n            setUnsavedProjectIDs(unsavedArray);\r\n            //show warning\r\n        }\r\n        else{\r\n            console.log(\"all saved\");\r\n            setUnsavedWarning(false);\r\n            handleCurrentUser(undefined);\r\n        }\r\n    }\r\n\r\n\r\n    function showUser(){\r\n        if(currentUser===undefined){\r\n            return(\r\n                <>\r\n                <span className='btn btn-nav' onClick={()=>handleUserSignIn(true)}>Sign in</span>\r\n                <LoginIn trigger={userSignIn} setTrigger={setUserSignIn} handleCreateNewAccount={handleCreateNewAccount}></LoginIn>\r\n                <CreateAccount trigger={createNewAccount} setTrigger={setCreateNewAccount}></CreateAccount>\r\n                </>\r\n            )\r\n        }else{\r\n            return (\r\n                <>\r\n                <span className='btn btn-nav' onClick={()=>{handleUserManagement(); handleUserSignIn(false)}}>\r\n                    <img className='account-icon' src={account_icon} alt=\"Account Icon\"></img>{currentUser.name}</span>\r\n                <UserDropDown trigger={userManagement} setTrigger={setUserManagement} \r\n                    handleAccountManagement={handleAccountManagement}\r\n                    handleUserSignOut={handleUserSignOut}></UserDropDown>       \r\n                <ManageAccount trigger={accountManagement} setTrigger={setAccountManagement} currentUser={currentUser}></ManageAccount>\r\n                <UnsavedWarning trigger={unsavedWarning} setTrigger={setUnsavedWarning} unsavedProjectIDs={unsavedProjectIDs}></UnsavedWarning>\r\n                </>\r\n            );\r\n        }\r\n    }\r\n  \r\nreturn (\r\n    <>{showUser()}</>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}