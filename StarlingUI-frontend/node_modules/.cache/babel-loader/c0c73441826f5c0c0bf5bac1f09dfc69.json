{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\songe\\\\Documents\\\\Project\\\\SummerProject\\\\StarlingUI-frontend\\\\src\\\\components\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { useCookies } from \"react-cookie\";\nimport { getCookie } from 'react-use-cookie';\nimport '../css/app.css';\nimport Navbar from \"./Navbar\";\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport Deployment from \"./Deployment\";\nimport Monitor from \"./Monitor\";\nimport ContainerTerminal from \"./monitor-contianer/ContainerTerminal\";\nimport ContainerLogs from \"./monitor-contianer/ContainerLogs\";\nimport RecoverMessage from \"./RecoverMessage\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PROJECT_URL = 'http://localhost:8080/design/projects';\nconst USER_URL = 'http://localhost:8080/design/users';\nconst REFRESH_URL = 'http://localhost:8080/refresh';\nconst LOCAL_STORAGE_KEY = 'Starling.user.projects';\nexport const ProjectContext = /*#__PURE__*/React.createContext();\n\nfunction App() {\n  _s();\n\n  const [cookies, setCookie, removeCookie] = useCookies();\n  const [currentUserID, setCurrentUserID] = useState(''); //undefined -> ''\n\n  const [selectedProjectID, setSelectedProjectID] = useState(); //const [projects, setProjects] = useState([]);\n\n  const [projects, setProjects] = useState(() => {\n    //load/get from storage\n    const saved = localStorage.getItem(LOCAL_STORAGE_KEY);\n\n    if (saved == null) {\n      return [];\n    } else {\n      return JSON.parse(saved);\n    }\n  });\n  const [userSignIn, setUserSignIn] = useState(false);\n  const [rememberMe, setRememberMe] = useState(true);\n  const [userData, setUserData] = useState(null);\n  const [projectsData, setProjectData] = useState(null);\n  const [isPending, setIsPending] = useState(true);\n  const [error, setError] = useState(null);\n  const [images, setImages] = useState([]);\n  const [unsavedProjectIDs, setUnsavedProjectIDs] = useState([]);\n  const [recoverMessage, setRecoverMessage] = useState(true);\n  useEffect(() => {\n    const refreshToken = getCookie('refreshToken');\n    const user = getCookie('user');\n\n    if (refreshToken !== '' && user !== '') {\n      //remember me\n      console.log(\"auto sign in check with \" + refreshToken);\n\n      (async () => {\n        try {\n          const {\n            data\n          } = await axios.get(REFRESH_URL, {\n            headers: {\n              'Authorization': `Bearer ${refreshToken}`\n            }\n          });\n          setCurrentUserID(getCookie('user'));\n          axios.defaults.headers.common['Authorization'] = `Bearer ${data['accessToken']}`;\n          console.log(\"success auto sign in\");\n        } catch (err) {\n          handleCurrentUser(undefined);\n          console.log(\"refresh token expires. log out.\");\n          signInPage();\n        }\n      })();\n    }\n  }, []);\n  useEffect(() => {\n    console.log(\"run when current user changes\");\n    signInPage();\n\n    if (currentUserID !== '' && projects.length === 0) {\n      const requestOne = axios.get(USER_URL);\n      const requestTwo = axios.get(PROJECT_URL);\n      console.log(\"fetch two api\");\n      axios.all([requestOne, requestTwo]).then(axios.spread(function () {\n        for (var _len = arguments.length, responses = new Array(_len), _key = 0; _key < _len; _key++) {\n          responses[_key] = arguments[_key];\n        }\n\n        const responseOne = responses[0].data;\n        const responseTwo = responses[1].data;\n        setIsPending(false);\n        setUserData(responseOne);\n        setProjectData(responseTwo);\n        setError(null);\n        console.log(responseOne);\n        console.log(responseTwo);\n        console.log(\"fetch: \" + USER_URL + \" and \" + PROJECT_URL);\n        setProjects(responseTwo.filter(project => project.memberIDs.find(id => id === currentUserID)));\n      })).catch(err => {\n        setIsPending(false);\n        console.log(err);\n\n        if (err.response.status === 401) {\n          setError(\"Authentication is required. Please sign in again.\");\n          handleCurrentUser(undefined);\n        } else {\n          setError(err.message);\n        }\n      });\n    } else if (currentUserID !== '' && projects.length !== 0) {\n      console.log(\"fetch one api\");\n      axios.get(USER_URL).then(responses => {\n        const responseOne = responses.data;\n        setIsPending(false);\n        setUserData(responseOne);\n        setError(null); //remind user\n\n        checkUnsavedProjects();\n        console.log(responseOne);\n        console.log(\"fetch: \" + USER_URL);\n      }).catch(err => {\n        setIsPending(false);\n        console.log(err);\n\n        if (err.response.status === 401) {\n          setError(\"Authentication is required. Please sign in again.\");\n          handleCurrentUser(undefined);\n        } else {\n          setError(err.message);\n        }\n      });\n    }\n  }, [currentUserID]);\n  useEffect(() => {\n    if (rememberMe) {\n      console.log(\"store project in local storage\"); //local storage can only store string\n\n      localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(projects));\n    }\n  }, [projects]);\n\n  function signInPage() {\n    if (currentUserID === '' && getCookie('user') === '') {\n      console.log(\"sign in page\");\n      setUserSignIn(true);\n    }\n  }\n\n  function handleProjectSelect(id) {\n    setSelectedProjectID(id);\n  }\n\n  function handleProjectChange(id, project) {\n    console.log(\"project content change\");\n    console.log(project);\n    project.saved = false;\n    const newProjects = [...projects];\n    const index = newProjects.findIndex(r => r.id === id);\n    newProjects[index] = project;\n    setProjects(newProjects);\n  }\n\n  function handleCurrentUser(id) {\n    //handle user select\n    if (id === undefined) {\n      console.log(\"user sign out!\");\n      setCurrentUserID('');\n      removeCookie(\"refreshToken\");\n      removeCookie(\"user\");\n      localStorage.clear();\n      setSelectedProjectID(undefined);\n      setProjects([]);\n    } else {\n      console.log(\"user sign in!\");\n      setCurrentUserID(id);\n\n      if (rememberMe) {\n        setCookie(\"user\", id, {\n          path: '/'\n        });\n      }\n    }\n  }\n\n  function handleUserAdd(id, name) {\n    const newUser = {\n      id: id,\n      name: name\n    };\n    console.log(newUser);\n    setUserData([...userData, newUser]);\n    setCurrentUserID(id);\n  }\n\n  function checkUnsavedProjects() {\n    let unsavedArray = [];\n\n    for (let i = 0; i < projects.length; i++) {\n      if (projects[i].memberIDs.includes(currentUserID) && projects[i].saved === false) {\n        console.log(\"unsaved project: \" + projects[i].id);\n        unsavedArray = [...unsavedArray, projects[i].id];\n      }\n    }\n\n    setUnsavedProjectIDs(unsavedArray);\n  }\n\n  const projectContextValue = {\n    currentUserID,\n    projects,\n    userData,\n    images,\n    userSignIn,\n    setUserSignIn,\n    setRememberMe,\n    setUserData,\n    setImages,\n    setProjects,\n    signInPage,\n    handleProjectSelect,\n    handleCurrentUser,\n    handleUserAdd,\n    handleProjectChange\n  };\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: [/*#__PURE__*/_jsxDEV(ProjectContext.Provider, {\n      value: projectContextValue,\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 29\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"project-title\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 42\n          }, this), currentUserID !== '' && isPending && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"project-title\",\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 68\n          }, this), (userData || projectsData) && /*#__PURE__*/_jsxDEV(Deployment, {\n            selectedProject: projects === null || projects === void 0 ? void 0 : projects.find(project => project.id === selectedProjectID)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 29\n          }, this), (userData || projectsData) && unsavedProjectIDs.length !== 0 && /*#__PURE__*/_jsxDEV(RecoverMessage, {\n            trigger: recoverMessage,\n            setTrigger: setRecoverMessage,\n            unsavedProjectIDs: unsavedProjectIDs\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 93\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/monitor\",\n          children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Monitor, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/terminal/:name/:namespace/:container\",\n      children: /*#__PURE__*/_jsxDEV(ContainerTerminal, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/logs/:name/:namespace/:container\",\n      children: /*#__PURE__*/_jsxDEV(ContainerLogs, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 220,\n    columnNumber: 9\n  }, this);\n}\n\n_s(App, \"9AqjwbCUb9DTd/fepCzN4gsx1b0=\", false, function () {\n  return [useCookies];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useCookies","getCookie","Navbar","BrowserRouter","Router","Route","Switch","Deployment","Monitor","ContainerTerminal","ContainerLogs","RecoverMessage","axios","PROJECT_URL","USER_URL","REFRESH_URL","LOCAL_STORAGE_KEY","ProjectContext","createContext","App","cookies","setCookie","removeCookie","currentUserID","setCurrentUserID","selectedProjectID","setSelectedProjectID","projects","setProjects","saved","localStorage","getItem","JSON","parse","userSignIn","setUserSignIn","rememberMe","setRememberMe","userData","setUserData","projectsData","setProjectData","isPending","setIsPending","error","setError","images","setImages","unsavedProjectIDs","setUnsavedProjectIDs","recoverMessage","setRecoverMessage","refreshToken","user","console","log","data","get","headers","defaults","common","err","handleCurrentUser","undefined","signInPage","length","requestOne","requestTwo","all","then","spread","responses","responseOne","responseTwo","filter","project","memberIDs","find","id","catch","response","status","message","checkUnsavedProjects","setItem","stringify","handleProjectSelect","handleProjectChange","newProjects","index","findIndex","r","clear","path","handleUserAdd","name","newUser","unsavedArray","i","includes","projectContextValue"],"sources":["C:/Users/songe/Documents/Project/SummerProject/StarlingUI-frontend/src/components/App.js"],"sourcesContent":["import React, {useState, useEffect, useCallback} from \"react\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport { getCookie } from 'react-use-cookie'\r\nimport '../css/app.css';\r\nimport Navbar from \"./Navbar\";\r\nimport {BrowserRouter as Router, Route, Switch} from 'react-router-dom';\r\nimport Deployment from \"./Deployment\";\r\nimport Monitor from \"./Monitor\";\r\nimport ContainerTerminal from \"./monitor-contianer/ContainerTerminal\";\r\nimport ContainerLogs from \"./monitor-contianer/ContainerLogs\";\r\nimport RecoverMessage from \"./RecoverMessage\";\r\nimport axios from \"axios\";\r\nconst PROJECT_URL = 'http://localhost:8080/design/projects';\r\nconst USER_URL = 'http://localhost:8080/design/users';\r\nconst REFRESH_URL = 'http://localhost:8080/refresh';\r\n\r\n\r\nconst LOCAL_STORAGE_KEY = 'Starling.user.projects';\r\n\r\nexport const ProjectContext = React.createContext();\r\n\r\nfunction App() {\r\n\r\n  const [cookies, setCookie, removeCookie] = useCookies();\r\n\r\n  const [currentUserID, setCurrentUserID] = useState(''); //undefined -> ''\r\n\r\n  const [selectedProjectID, setSelectedProjectID] = useState();\r\n  \r\n  //const [projects, setProjects] = useState([]);\r\n  const [projects, setProjects] = useState(() => { \r\n    //load/get from storage\r\n    const saved = localStorage.getItem(LOCAL_STORAGE_KEY)\r\n    if (saved == null) {\r\n      return []\r\n    } else {\r\n      return JSON.parse(saved)\r\n    }\r\n  })\r\n  \r\n  const [userSignIn, setUserSignIn] = useState(false);\r\n\r\n  const [rememberMe, setRememberMe] = useState(true);\r\n\r\n  const [userData, setUserData] = useState(null);\r\n  const [projectsData, setProjectData] = useState(null);\r\n  const [isPending, setIsPending] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const [images, setImages] = useState([]);\r\n\r\n  const [unsavedProjectIDs, setUnsavedProjectIDs] = useState([]);\r\n  const [recoverMessage, setRecoverMessage] = useState(true);\r\n\r\n  useEffect(()=>{\r\n    const refreshToken = getCookie('refreshToken');\r\n    const user = getCookie('user');\r\n    if(refreshToken!=='' && user!==''){ //remember me\r\n        console.log(\"auto sign in check with \"+refreshToken);\r\n        (async () => {\r\n          try {\r\n              const {data} = await axios.get(REFRESH_URL,\r\n                {\r\n                  headers: { \r\n                      'Authorization': `Bearer ${refreshToken}` ,\r\n                  },\r\n                });\r\n                setCurrentUserID(getCookie('user'));\r\n                axios.defaults.headers.common['Authorization'] = `Bearer ${data['accessToken']}`;\r\n                console.log(\"success auto sign in\");\r\n          } catch (err) {\r\n            handleCurrentUser(undefined);\r\n            console.log(\"refresh token expires. log out.\");\r\n            signInPage();\r\n          }\r\n      })();\r\n    }\r\n\r\n  },[]);\r\n  \r\n  useEffect(()=>{\r\n    console.log(\"run when current user changes\");\r\n    signInPage();\r\n\r\n    if(currentUserID!=='' && projects.length===0){\r\n      const requestOne = axios.get(USER_URL);\r\n      const requestTwo = axios.get(PROJECT_URL);\r\n      console.log(\"fetch two api\");\r\n      \r\n        axios.all([requestOne, requestTwo]).then(axios.spread((...responses) => {\r\n          const responseOne = responses[0].data;\r\n          const responseTwo = responses[1].data;\r\n          setIsPending(false);\r\n          setUserData(responseOne);\r\n          setProjectData(responseTwo);\r\n          setError(null);\r\n          console.log(responseOne);\r\n          console.log(responseTwo);\r\n          console.log(\"fetch: \"+USER_URL+\" and \"+PROJECT_URL);\r\n          setProjects(responseTwo.filter(project=>project.memberIDs.find(id=>id===currentUserID)));\r\n        })).catch(err => {\r\n          setIsPending(false);\r\n          console.log(err);\r\n          if(err.response.status===401){\r\n            setError(\"Authentication is required. Please sign in again.\");\r\n            handleCurrentUser(undefined);\r\n          }else{\r\n            setError(err.message);\r\n          }\r\n        })  \r\n    }else if(currentUserID!=='' && projects.length!==0){\r\n        console.log(\"fetch one api\");\r\n        axios.get(USER_URL).then(responses => {\r\n        const responseOne = responses.data;\r\n        setIsPending(false);\r\n        setUserData(responseOne);\r\n        setError(null);\r\n        //remind user\r\n        checkUnsavedProjects();\r\n        console.log(responseOne);\r\n        console.log(\"fetch: \"+USER_URL);\r\n      }).catch(err => {\r\n        setIsPending(false);\r\n        console.log(err);\r\n        if(err.response.status===401){\r\n          setError(\"Authentication is required. Please sign in again.\");\r\n          handleCurrentUser(undefined);\r\n        }else{\r\n          setError(err.message);\r\n        }\r\n      })  \r\n    }\r\n    \r\n  },[currentUserID]);\r\n\r\n  useEffect(()=>{\r\n    if(rememberMe){\r\n      console.log(\"store project in local storage\");\r\n      //local storage can only store string\r\n      localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(projects));\r\n    }\r\n  },[projects]);\r\n\r\n  function signInPage(){\r\n    if(currentUserID==='' && getCookie('user')===''){\r\n      console.log(\"sign in page\");\r\n      setUserSignIn(true);\r\n    }\r\n  }\r\n\r\n  function handleProjectSelect(id){\r\n    setSelectedProjectID(id);\r\n  }\r\n\r\n  function handleProjectChange(id, project){\r\n    console.log(\"project content change\")\r\n    console.log(project);\r\n    project.saved = false;\r\n    const newProjects = [...projects]; \r\n    const index = newProjects.findIndex(r=>r.id === id);\r\n    newProjects[index] = project;\r\n    setProjects(newProjects);\r\n  }\r\n\r\n  function handleCurrentUser(id){ //handle user select\r\n    if(id===undefined){\r\n      console.log(\"user sign out!\");\r\n      setCurrentUserID('');\r\n      removeCookie(\"refreshToken\");\r\n      removeCookie(\"user\");\r\n      localStorage.clear();\r\n      setSelectedProjectID(undefined);\r\n      setProjects([]);\r\n    }else{\r\n      console.log(\"user sign in!\");\r\n      setCurrentUserID(id);\r\n      if(rememberMe){\r\n        setCookie(\"user\", id, { path: '/' });\r\n      }\r\n    }\r\n  }\r\n\r\n  function handleUserAdd(id, name){\r\n    const newUser = {id: id, name: name};\r\n    console.log(newUser);\r\n    setUserData([...userData, newUser]);\r\n    setCurrentUserID(id);\r\n  }\r\n\r\n  function checkUnsavedProjects(){\r\n    let unsavedArray=[];\r\n    for(let i=0;i<projects.length;i++){\r\n        if(projects[i].memberIDs.includes(currentUserID) && projects[i].saved===false){\r\n          console.log(\"unsaved project: \"+projects[i].id);\r\n          unsavedArray = [...unsavedArray, projects[i].id];\r\n        }\r\n    }\r\n    setUnsavedProjectIDs(unsavedArray);\r\n  }\r\n\r\n  const projectContextValue = {\r\n    currentUserID,\r\n    projects,\r\n    userData,\r\n    images,\r\n    userSignIn,\r\n    setUserSignIn,\r\n    setRememberMe,\r\n    setUserData,\r\n    setImages,\r\n    setProjects,\r\n    signInPage,\r\n    handleProjectSelect,\r\n    handleCurrentUser,\r\n    handleUserAdd,\r\n    handleProjectChange\r\n  } \r\n  \r\n  return (\r\n        <Router>\r\n            <ProjectContext.Provider value={projectContextValue}>\r\n                    <Switch>\r\n                        <Route exact path=\"/\">\r\n                            <Navbar></Navbar>\r\n                            { (error) && <div className=\"project-title\">{error}</div> }\r\n                            { currentUserID!=='' && (isPending) && <div className=\"project-title\">Loading...</div> }\r\n                            { (userData || projectsData ) &&\r\n                            <Deployment \r\n                              selectedProject={projects?.find(project => project.id === selectedProjectID)}></Deployment>}\r\n                            {(userData || projectsData ) && unsavedProjectIDs.length!==0 && <RecoverMessage trigger={recoverMessage} setTrigger={setRecoverMessage} unsavedProjectIDs={unsavedProjectIDs}></RecoverMessage>}  \r\n                        </Route>\r\n                        <Route path=\"/monitor\">\r\n                            <Navbar></Navbar>\r\n                            <Monitor></Monitor>\r\n                        </Route>\r\n                    </Switch>\r\n            </ProjectContext.Provider>\r\n\r\n            <Route path=\"/terminal/:name/:namespace/:container\">\r\n                <ContainerTerminal></ContainerTerminal>\r\n            </Route>\r\n            <Route path=\"/logs/:name/:namespace/:container\">\r\n                <ContainerLogs></ContainerLogs>\r\n            </Route>\r\n        </Router>\r\n    )\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}