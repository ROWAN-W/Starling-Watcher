{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\songe\\\\Documents\\\\Project\\\\SummerProject\\\\StarlingUI-frontend\\\\src\\\\components\\\\deployment-menu\\\\Upload.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport logo from '../img/load.gif';\nimport axios from 'axios';\nimport { ProjectContext } from '../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UPLOAD_URL = 'http://localhost:8080/design/upload';\nexport default function Upload(props) {\n  _s();\n\n  const [namespace, setNamespace] = useState('');\n  const {\n    handleCurrentUser\n  } = useContext(ProjectContext);\n  const [selectedFile, setSelectedFile] = useState();\n  const [result, setResult] = useState('');\n  const [savePending, setIsPending] = useState(false);\n  const [reLogin, setReLogin] = useState(false);\n  useEffect(() => {\n    //key friendly\n    window.addEventListener('keydown', keyOperation);\n    return () => {\n      window.removeEventListener('keydown', keyOperation);\n    };\n  }, []);\n  let textInput = null;\n  useEffect(() => {\n    if (props.trigger === true) {\n      textInput.focus();\n    }\n  }, [props.trigger]);\n\n  function keyOperation(e) {\n    if (e.key === 'Escape' || e.code === 'Escape') {\n      closeWindow();\n    }\n  }\n\n  function closeWindow() {\n    authenticateAgain();\n    clearField();\n    props.setTrigger(false);\n  }\n\n  function handleFileUpload() {\n    if (selectedFile === null || selectedFile === undefined) {\n      setResult(\"Please choose valid file (.yml or .yaml)\");\n      return;\n    }\n\n    const fd = new FormData();\n    fd.append('namespace', namespace);\n    fd.append('file', selectedFile);\n    axios.post(UPLOAD_URL, fd, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    }).then(res => {\n      setIsPending(false);\n      setResult('Success'); //respond from Rowan's server\n    }).catch(err => {\n      setIsPending(false);\n\n      if (err.response.status === 404) {\n        setResult(\"Invalid YAML file/ Fail to deploy\");\n      } else if (err.response.status === 401) {\n        setResult(\"Authentication is required. Please sign in again.\");\n        setReLogin(true);\n      } else {\n        setResult(err.message);\n      }\n    });\n  }\n\n  function clearField() {\n    setSelectedFile();\n    setResult('');\n    setNamespace('');\n  }\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (namespaceCheck(namespace)) {\n      setIsPending(true);\n      setResult('Please wait...');\n      handleFileUpload();\n    }\n  };\n\n  const checkMimeType = event => {\n    let file = event.target.files[0];\n\n    if (file === null || file === undefined) {\n      return false;\n    }\n\n    console.log(\"checking\");\n    let str = file.name;\n    console.log(file);\n    console.log(file.name);\n    const index = str.lastIndexOf('.');\n    const after = str.slice(index + 1);\n    console.log(after);\n\n    if (after !== 'yml' && after !== 'yaml') {\n      setResult(\"YAML file Only.\");\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  function namespaceCheck(value) {\n    if (value !== '') {\n      for (let i = 0; i < value.length; i++) {\n        let code = value.charCodeAt(i);\n\n        if (code !== 45 && // '-'\n        !(code > 47 && code < 58) && // numeric (0-9)\n        !(code > 96 && code < 123)) {\n          // lower alpha (a-z)\n          console.log(\"contain only lowercase alphanumeric characters or '-'\");\n          setResult(\"Namespace can only contain '-' or lowercase alphanumeric characters\");\n          return false;\n        }\n      }\n\n      if (value.charCodeAt(0) === 45 || value.charCodeAt(value.length - 1) === 45) {\n        console.log(\"start/end with an alphanumeric character\");\n        setResult(\"Namespace can only start/end with an alphanumeric character\");\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  function authenticateAgain() {\n    if (reLogin) {\n      handleCurrentUser(undefined);\n      setReLogin(false);\n    }\n  }\n\n  return props.trigger ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"popup-projects\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"popup-projects-inner\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"popup-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"popup-title\",\n          children: \"Upload file (YAML/YML) & Deploy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 17\n        }, this), !savePending && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"popup-close-button\",\n          onClick: () => {\n            closeWindow();\n          },\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 34\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        method: \"post\",\n        action: \"#\",\n        id: \"#\",\n        onSubmit: handleSubmit,\n        className: \"advanced-setting-form\",\n        children: [savePending && /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"wait-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"loading\",\n            src: logo,\n            alt: \"loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 66\n          }, this), \"Please wait...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 37\n        }, this), !savePending && result !== '' && result !== 'Success' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-msg wordwrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-times-circle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 111\n          }, this), result]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 75\n        }, this), result === 'Success' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"success-msg wordwrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-check\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 82\n          }, this), result]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 44\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"popup-major stack\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"namespace\",\n            className: \"popup-major-key major\",\n            children: [\"Namespace\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"required\",\n              children: \"*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 88\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"namespace\",\n            id: \"namespace\",\n            value: namespace,\n            required: true,\n            maxLength: 63,\n            onChange: e => {\n              setNamespace(e.target.value);\n              setResult('');\n            },\n            className: \"width-100\",\n            ref: button => {\n              textInput = button;\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"popup-major stack\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"file\",\n            className: \"popup-major-key major\",\n            children: [\"YAML/YML\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"required\",\n              children: \"*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 82\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            required: true,\n            onClick: () => {\n              setResult('');\n              setSelectedFile();\n            },\n            onChange: e => {\n              checkMimeType(e) && setSelectedFile(e.target.files[0]);\n            },\n            className: \"width-100\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"key-hint popup-inner\",\n          children: \"(Press Enter to upload, ESC to leave)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"popup-footer single\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            type: \"submit\",\n            children: \"Deploy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 142,\n    columnNumber: 9\n  }, this) : \"\";\n}\n\n_s(Upload, \"Phvh9urI/59ycxM8IseWuWf5K8U=\");\n\n_c = Upload;\n\nvar _c;\n\n$RefreshReg$(_c, \"Upload\");","map":{"version":3,"names":["React","useState","useContext","useEffect","logo","axios","ProjectContext","UPLOAD_URL","Upload","props","namespace","setNamespace","handleCurrentUser","selectedFile","setSelectedFile","result","setResult","savePending","setIsPending","reLogin","setReLogin","window","addEventListener","keyOperation","removeEventListener","textInput","trigger","focus","e","key","code","closeWindow","authenticateAgain","clearField","setTrigger","handleFileUpload","undefined","fd","FormData","append","post","headers","then","res","catch","err","response","status","message","handleSubmit","preventDefault","namespaceCheck","checkMimeType","event","file","target","files","console","log","str","name","index","lastIndexOf","after","slice","value","i","length","charCodeAt","button"],"sources":["C:/Users/songe/Documents/Project/SummerProject/StarlingUI-frontend/src/components/deployment-menu/Upload.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\r\nimport logo from '../img/load.gif';\r\nimport axios from 'axios';\r\nimport { ProjectContext } from '../App';\r\nconst UPLOAD_URL = 'http://localhost:8080/design/upload';\r\n\r\nexport default function Upload(props) {\r\n\r\n    const [namespace, setNamespace] = useState('');\r\n    const {handleCurrentUser} = useContext(ProjectContext);\r\n\r\n    const [selectedFile, setSelectedFile] = useState();\r\n    const [result, setResult] = useState('');\r\n    const [savePending, setIsPending] = useState(false);\r\n    const [reLogin, setReLogin] = useState(false);\r\n\r\n    useEffect(()=>{\r\n        //key friendly\r\n        window.addEventListener('keydown', keyOperation);\r\n            \r\n        return () => { \r\n          window.removeEventListener('keydown', keyOperation);\r\n        };\r\n      },[]);\r\n\r\n    let textInput = null;\r\n    useEffect(()=>{\r\n        if(props.trigger===true){\r\n            textInput.focus();\r\n        }\r\n    },[props.trigger])\r\n    \r\n    function keyOperation(e){\r\n        if(e.key==='Escape'||e.code==='Escape'){\r\n            closeWindow();\r\n        }\r\n    }\r\n\r\n    function closeWindow(){\r\n        authenticateAgain();clearField();props.setTrigger(false);\r\n    }\r\n\r\n    function handleFileUpload(){\r\n        if(selectedFile===null || selectedFile===undefined){\r\n            setResult(\"Please choose valid file (.yml or .yaml)\");\r\n            return;\r\n        }\r\n        const fd = new FormData();\r\n        fd.append('namespace',namespace);\r\n        fd.append('file',selectedFile);\r\n        axios.post(UPLOAD_URL,fd, {\r\n            headers: {\r\n              \"Content-Type\": \"multipart/form-data\",\r\n            }\r\n        })\r\n        .then(res => { \r\n            setIsPending(false);\r\n            setResult('Success'); //respond from Rowan's server\r\n          })\r\n        .catch(err => {\r\n            setIsPending(false);\r\n            if(err.response.status===404){\r\n                setResult(\"Invalid YAML file/ Fail to deploy\");\r\n            }\r\n            else if(err.response.status===401){\r\n                setResult(\"Authentication is required. Please sign in again.\");\r\n                setReLogin(true);\r\n            }\r\n            else{\r\n                setResult(err.message);\r\n            }\r\n        })\r\n    }\r\n\r\n    function clearField(){\r\n        setSelectedFile();\r\n        setResult('');\r\n        setNamespace('');\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        if(namespaceCheck(namespace)){\r\n            setIsPending(true);\r\n            setResult('Please wait...');\r\n            handleFileUpload();\r\n        }\r\n    }\r\n\r\n\r\n    const checkMimeType=(event)=>{\r\n        let file = event.target.files[0]; \r\n        if(file===null || file===undefined){\r\n            return false;\r\n        }        \r\n        console.log(\"checking\");\r\n        let str = file.name;\r\n        console.log(file);\r\n        console.log(file.name);\r\n\r\n        const index = str.lastIndexOf('.');\r\n        const after = str.slice(index + 1);\r\n        console.log(after); \r\n        if(after!=='yml' && after!=='yaml'){\r\n            setResult(\"YAML file Only.\");\r\n            return false;\r\n        }else{\r\n            return true;\r\n        }\r\n    }\r\n\r\n    function namespaceCheck(value){\r\n        if(value!==''){\r\n            for (let i = 0; i < value.length; i++) {\r\n            let code = value.charCodeAt(i);\r\n            if ((code !== 45) && // '-'\r\n                !(code > 47 && code < 58) && // numeric (0-9)\r\n                !(code > 96 && code < 123)) { // lower alpha (a-z)\r\n                \r\n                console.log(\"contain only lowercase alphanumeric characters or '-'\");\r\n                setResult(\"Namespace can only contain '-' or lowercase alphanumeric characters\")\r\n                return false;\r\n                }\r\n            }\r\n            if(value.charCodeAt(0)===45 || value.charCodeAt(value.length-1)===45){\r\n                console.log(\"start/end with an alphanumeric character\");\r\n                setResult(\"Namespace can only start/end with an alphanumeric character\")\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    function authenticateAgain(){\r\n        if(reLogin){\r\n          handleCurrentUser(undefined);\r\n          setReLogin(false);\r\n        }\r\n    }\r\n\r\n    return (props.trigger) ? (\r\n        <div className='popup-projects'>\r\n            <div className='popup-projects-inner'>\r\n            <div className='popup-header'>\r\n                <span className='popup-title'>Upload file (YAML/YML) & Deploy</span>\r\n                {!savePending && <button type=\"button\" className='popup-close-button' onClick={()=>{closeWindow()}}>&times;</button>}\r\n            </div>\r\n                <form method=\"post\" action=\"#\" id=\"#\" onSubmit={handleSubmit} className=\"advanced-setting-form\">\r\n                    {savePending && <h4 className='wait-message'><img className=\"loading\" src={logo} alt=\"loading...\" />Please wait...</h4>}\r\n                    {!savePending && result!=='' && result!=='Success' && <div className=\"error-msg wordwrap\"><i className=\"fa fa-times-circle\"></i>{result}</div>}\r\n                    {result==='Success' && <div className=\"success-msg wordwrap\"><i className=\"fa fa-check\"></i>{result}</div>}\r\n                    <div className='popup-major stack'>\r\n                    <label \r\n                        htmlFor='namespace' className='popup-major-key major'>Namespace<span className='required'>*</span>\r\n                    </label>\r\n                    <input \r\n                        type='text' \r\n                        name='namespace' \r\n                        id='namespace'\r\n                        value={namespace}\r\n                        required\r\n                        maxLength = {63}\r\n                        onChange={e=>{setNamespace(e.target.value);setResult('');}}\r\n                        className=\"width-100\"\r\n                        ref={(button) => { textInput = button; }}\r\n                        >\r\n                    </input>\r\n                    </div>\r\n                    <div className='popup-major stack'>                    \r\n                    <label \r\n                        htmlFor='file' className='popup-major-key major'>YAML/YML<span className='required'>*</span>\r\n                    </label>\r\n                    <input type=\"file\" required \r\n                        onClick={()=>{setResult('');setSelectedFile()}} onChange={e=>{checkMimeType(e)&&setSelectedFile(e.target.files[0])}} className=\"width-100\"/>\r\n                    </div>\r\n                    <div className='key-hint popup-inner'>(Press Enter to upload, ESC to leave)</div>\r\n                    <div className='popup-footer single'>\r\n                        <button className='btn' type='submit'>Deploy</button>\r\n                    </div> \r\n                </form>\r\n            </div>\r\n        </div>\r\n    ): \"\"\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}