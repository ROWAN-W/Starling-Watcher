{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\songe\\\\Documents\\\\Project\\\\SummerProject\\\\StarlingUI-frontend\\\\src\\\\components\\\\deployment-menu\\\\share\\\\ShareProject.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport { ProjectContext } from '../../App';\nimport Member from './Member';\nimport MemberSelection from './MemberSelection';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ShareProject(props) {\n  _s();\n\n  const {\n    userData,\n    currentUserID,\n    handleProjectChange\n  } = useContext(ProjectContext);\n  const [existingMembers, setExistingMembers] = useState([]);\n  useEffect(() => {\n    if (props.trigger === true) {\n      var _props$selectedProjec;\n\n      console.log(\"rendered in share\");\n      setExistingMembers((_props$selectedProjec = props.selectedProject) === null || _props$selectedProjec === void 0 ? void 0 : _props$selectedProjec.memberIDs);\n    }\n  }, [props.trigger]);\n\n  function handleChange(changes) {\n    handleProjectChange(props.selectedProject.id, { ...props.selectedProject,\n      ...changes\n    });\n  }\n\n  function saveChange() {\n    const result = existingMembers.find(member => member === currentUserID);\n\n    if (result === undefined) {\n      console.log(\"delete yourself\"); //sign out to make the data sync\n\n      props.setWarning(true);\n    }\n\n    handleChange({\n      memberIDs: existingMembers\n    });\n  }\n\n  function clearField() {\n    setExistingMembers(props.selectedProject.memberIDs);\n  }\n\n  function removeMember(id) {\n    console.log(\"remove member\");\n    setExistingMembers(existingMembers.filter(member => member !== id));\n  }\n\n  function addMember(id) {\n    console.log(\"add member\");\n    setExistingMembers([...existingMembers, id]);\n  }\n\n  function content() {\n    if (props.selectedProject.ownerID === currentUserID) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"popup-header owner\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"popup-title wordwrap wordbreak\",\n            children: [\"Share \", props.selectedProject.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"popup-close-button\",\n            onClick: () => {\n              props.setTrigger(false);\n              clearField();\n            },\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"share\",\n          children: [/*#__PURE__*/_jsxDEV(MemberSelection, {\n            addMember: addMember,\n            options: userData.filter(x => !(existingMembers !== null && existingMembers !== void 0 && existingMembers.includes(x.id)))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"people-list\",\n            children: \"People with access\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 17\n          }, this), existingMembers === null || existingMembers === void 0 ? void 0 : existingMembers.map(member => /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Member, {\n              owner: props.selectedProject.ownerID,\n              member: member,\n              removeMember: removeMember\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 65\n            }, this)\n          }, member, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 47\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"popup-footer normal\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: () => {\n              saveChange();\n              props.setTrigger(false);\n            },\n            children: \"Done\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-cancel\",\n            onClick: () => {\n              props.setTrigger(false);\n              clearField();\n            },\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true);\n    } else {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"popup-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"popup-title wordwrap wordbreak\",\n            children: [\"Members of \", props.selectedProject.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"popup-close-button\",\n            onClick: () => {\n              props.setTrigger(false);\n              clearField();\n            },\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info-msg wordwrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-info-circle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 17\n          }, this), \"Only project owner can add/delete members.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"people-list\",\n          children: \"People with access\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 17\n        }, this), existingMembers === null || existingMembers === void 0 ? void 0 : existingMembers.map(member => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Member, {\n            owner: props.selectedProject.ownerID,\n            member: member,\n            removeMember: removeMember\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 65\n          }, this)\n        }, member, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 47\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"popup-footer normal\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn short\",\n            onClick: () => {\n              props.setTrigger(false);\n            },\n            children: \"OK\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true);\n    }\n  }\n\n  return props.trigger ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"popup-projects\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"popup-projects-inner\",\n      children: content()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 9\n  }, this) : \"\";\n}\n\n_s(ShareProject, \"I+5jLXqmvaXL/Ecmg6l+cKlwFVg=\");\n\n_c = ShareProject;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShareProject\");","map":{"version":3,"names":["React","useState","useContext","useEffect","ProjectContext","Member","MemberSelection","ShareProject","props","userData","currentUserID","handleProjectChange","existingMembers","setExistingMembers","trigger","console","log","selectedProject","memberIDs","handleChange","changes","id","saveChange","result","find","member","undefined","setWarning","clearField","removeMember","filter","addMember","content","ownerID","name","setTrigger","x","includes","map"],"sources":["C:/Users/songe/Documents/Project/SummerProject/StarlingUI-frontend/src/components/deployment-menu/share/ShareProject.js"],"sourcesContent":["import React, {useState, useContext, useEffect} from 'react';\r\nimport { ProjectContext } from '../../App';\r\nimport Member from './Member';\r\nimport MemberSelection from './MemberSelection';\r\n\r\nexport default function ShareProject(props) {\r\n\r\n    const {userData, currentUserID, handleProjectChange} = useContext(ProjectContext);\r\n\r\n    const [existingMembers, setExistingMembers] = useState([]);\r\n\r\n\r\n    useEffect(()=>{\r\n        if(props.trigger===true){\r\n            console.log(\"rendered in share\");\r\n            setExistingMembers(props.selectedProject?.memberIDs);\r\n        }\r\n      },[props.trigger]);\r\n    \r\n    function handleChange(changes){\r\n        handleProjectChange(props.selectedProject.id, {...props.selectedProject,...changes});\r\n    }\r\n\r\n    function saveChange(){\r\n        const result = existingMembers.find(member=>member===currentUserID);\r\n        if(result===undefined){\r\n            console.log(\"delete yourself\");\r\n            //sign out to make the data sync\r\n            props.setWarning(true);\r\n        }\r\n        handleChange({memberIDs: existingMembers});        \r\n    }\r\n\r\n    function clearField(){\r\n        setExistingMembers(props.selectedProject.memberIDs);\r\n    }\r\n        \r\n    function removeMember(id){\r\n        console.log(\"remove member\");\r\n        setExistingMembers(existingMembers.filter(member=>member!==id));\r\n    }\r\n\r\n    function addMember(id){\r\n        console.log(\"add member\");\r\n        setExistingMembers([...existingMembers,id]);\r\n    }\r\n\r\n    function content(){\r\n        if(props.selectedProject.ownerID===currentUserID){\r\n            return(\r\n                <>\r\n                <div className='popup-header owner'>\r\n                    <span className='popup-title wordwrap wordbreak'>Share {props.selectedProject.name}</span>\r\n                    <button className='popup-close-button' onClick={()=>{props.setTrigger(false);clearField()}}>&times;</button>\r\n                </div>\r\n\r\n                <div className=\"share\">\r\n                <MemberSelection addMember={addMember} options={userData.filter(x => !existingMembers?.includes(x.id))}></MemberSelection>\r\n                \r\n                <div className=\"people-list\">People with access</div>\r\n                {existingMembers?.map(member=><div key={member}><Member owner={props.selectedProject.ownerID} member={member} removeMember={removeMember}></Member></div>)}\r\n                </div>\r\n                \r\n                <div className='popup-footer normal'>\r\n                    <button className='btn btn-primary' onClick={()=>{saveChange();props.setTrigger(false)}}>Done</button>\r\n                    <button className='btn btn-cancel' onClick={()=>{props.setTrigger(false);clearField()}}>Cancel</button>\r\n                </div>\r\n                </>\r\n            )\r\n        }\r\n        else{\r\n            return(\r\n                <>\r\n                <div className='popup-header'>\r\n                    <span className='popup-title wordwrap wordbreak'>Members of {props.selectedProject.name}</span>\r\n                    <button className='popup-close-button' onClick={()=>{props.setTrigger(false);clearField()}}>&times;</button>\r\n                </div>\r\n                \r\n                <div className=\"info-msg wordwrap\">\r\n                <i className=\"fa fa-info-circle\"></i>\r\n                Only project owner can add/delete members.\r\n                </div>\r\n\r\n                <div className=\"people-list\">People with access</div>\r\n                {existingMembers?.map(member=><div key={member}><Member owner={props.selectedProject.ownerID} member={member} removeMember={removeMember}></Member></div>)}\r\n\r\n                <div className='popup-footer normal'>\r\n                <button className='btn short' onClick={()=>{props.setTrigger(false)}}>OK</button>\r\n                </div>\r\n                </>\r\n            )\r\n        }\r\n    }\r\n\r\n    return (props.trigger) ?(\r\n        <div className='popup-projects'>\r\n            <div className='popup-projects-inner'>\r\n                {content()}\r\n            </div>\r\n        </div>\r\n      ): \"\"\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}