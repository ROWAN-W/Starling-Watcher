{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\songe\\\\Documents\\\\Project\\\\SummerProject\\\\StarlingUI-frontend\\\\src\\\\components\\\\monitor-contianer\\\\ContainerLogs.js\",\n    _s = $RefreshSig$();\n\nimport { useParams } from \"react-router-dom\";\nimport { FitAddon } from \"xterm-addon-fit\";\nimport { useEffect } from \"react\";\nimport { AttachAddon } from \"xterm-addon-attach\";\nimport { Terminal } from \"xterm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nlet socket;\nlet cols;\nlet rows;\nconst fitAddon = new FitAddon();\nexport default function ContainerLogs() {\n  _s();\n\n  const {\n    name,\n    namespace,\n    container\n  } = useParams();\n  useEffect(() => {\n    cols = parseInt(document.body.clientWidth / 9);\n    rows = parseInt(document.body.clientHeight / 18);\n    const logs = new Terminal({\n      convertEol: true,\n      cursorBlink: true,\n      rows: rows,\n      cols: cols,\n      fontSize: 18,\n      fontFamily: `'Fira Mono', monospace`,\n      theme: {\n        foreground: '#FFF'\n      }\n    });\n    logs.open(document.getElementById(\"logs-container\"));\n    let url = 'ws://localhost:8080/container/logs';\n    url += '?name=' + name + '&namespace=' + namespace + '&container=' + container; // eslint-disable-next-line react-hooks/exhaustive-deps\n\n    socket = new WebSocket(url);\n    const attachAddon = new AttachAddon(socket); // Attach the socket to term\n\n    logs.loadAddon(attachAddon);\n    logs.loadAddon(fitAddon);\n    fitAddon.fit();\n\n    window.onresize = function () {\n      fitAddon.fit();\n      logs.scrollToBottom();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"0\",\n        border: \"0\",\n        margin: \"0\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"logs-container\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\n_s(ContainerLogs, \"i1O2yJpcbKbmlDcLUM4OC7oPxmA=\", false, function () {\n  return [useParams];\n});\n\n_c = ContainerLogs;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContainerLogs\");","map":{"version":3,"names":["useParams","FitAddon","useEffect","AttachAddon","Terminal","socket","cols","rows","fitAddon","ContainerLogs","name","namespace","container","parseInt","document","body","clientWidth","clientHeight","logs","convertEol","cursorBlink","fontSize","fontFamily","theme","foreground","open","getElementById","url","WebSocket","attachAddon","loadAddon","fit","window","onresize","scrollToBottom","padding","border","margin"],"sources":["C:/Users/songe/Documents/Project/SummerProject/StarlingUI-frontend/src/components/monitor-contianer/ContainerLogs.js"],"sourcesContent":["import {useParams} from \"react-router-dom\";\r\nimport {FitAddon} from \"xterm-addon-fit\";\r\nimport {useEffect} from \"react\";\r\nimport {AttachAddon} from \"xterm-addon-attach\";\r\nimport {Terminal} from \"xterm\";\r\n\r\n\r\nlet socket;\r\nlet cols;\r\nlet rows;\r\nconst fitAddon = new FitAddon();\r\nexport default function ContainerLogs(){\r\n\r\n    const { name,namespace,container } = useParams();\r\n\r\n    useEffect(() => {\r\n        cols=parseInt(document.body.clientWidth /9)\r\n        rows=parseInt(document.body.clientHeight / 18)\r\n        const logs = new Terminal({\r\n            convertEol: true,\r\n            cursorBlink: true,\r\n            rows:rows,\r\n            cols:cols,\r\n            fontSize: 18,\r\n            fontFamily: `'Fira Mono', monospace`,\r\n            theme: {\r\n                foreground: '#FFF',\r\n            }\r\n        });\r\n\r\n            logs.open(document.getElementById(\"logs-container\"));\r\n\r\n\r\n\r\n            let url = 'ws://localhost:8080/container/logs';\r\n            url += '?name=' + name\r\n                + '&namespace=' + namespace\r\n                + '&container=' + container\r\n\r\n            // eslint-disable-next-line react-hooks/exhaustive-deps\r\n            socket = new WebSocket(url);\r\n            const attachAddon = new AttachAddon(socket);\r\n            // Attach the socket to term\r\n            logs.loadAddon(attachAddon);\r\n            logs.loadAddon(fitAddon);\r\n            fitAddon.fit()\r\n        window.onresize = function (){\r\n            fitAddon.fit()\r\n            logs.scrollToBottom()\r\n        }\r\n\r\n    \r\n\r\n    }, []);\r\n\r\n\r\n\r\n    return(\r\n        <>\r\n            <div style={{padding: \"0\",border: \"0\",margin: \"0\"}}>\r\n                <div id=\"logs-container\"></div>\r\n            </div>\r\n        </>\r\n    )\r\n}"],"mappings":";;;AAAA,SAAQA,SAAR,QAAwB,kBAAxB;AACA,SAAQC,QAAR,QAAuB,iBAAvB;AACA,SAAQC,SAAR,QAAwB,OAAxB;AACA,SAAQC,WAAR,QAA0B,oBAA1B;AACA,SAAQC,QAAR,QAAuB,OAAvB;;;AAGA,IAAIC,MAAJ;AACA,IAAIC,IAAJ;AACA,IAAIC,IAAJ;AACA,MAAMC,QAAQ,GAAG,IAAIP,QAAJ,EAAjB;AACA,eAAe,SAASQ,aAAT,GAAwB;EAAA;;EAEnC,MAAM;IAAEC,IAAF;IAAOC,SAAP;IAAiBC;EAAjB,IAA+BZ,SAAS,EAA9C;EAEAE,SAAS,CAAC,MAAM;IACZI,IAAI,GAACO,QAAQ,CAACC,QAAQ,CAACC,IAAT,CAAcC,WAAd,GAA2B,CAA5B,CAAb;IACAT,IAAI,GAACM,QAAQ,CAACC,QAAQ,CAACC,IAAT,CAAcE,YAAd,GAA6B,EAA9B,CAAb;IACA,MAAMC,IAAI,GAAG,IAAId,QAAJ,CAAa;MACtBe,UAAU,EAAE,IADU;MAEtBC,WAAW,EAAE,IAFS;MAGtBb,IAAI,EAACA,IAHiB;MAItBD,IAAI,EAACA,IAJiB;MAKtBe,QAAQ,EAAE,EALY;MAMtBC,UAAU,EAAG,wBANS;MAOtBC,KAAK,EAAE;QACHC,UAAU,EAAE;MADT;IAPe,CAAb,CAAb;IAYIN,IAAI,CAACO,IAAL,CAAUX,QAAQ,CAACY,cAAT,CAAwB,gBAAxB,CAAV;IAIA,IAAIC,GAAG,GAAG,oCAAV;IACAA,GAAG,IAAI,WAAWjB,IAAX,GACD,aADC,GACeC,SADf,GAED,aAFC,GAEeC,SAFtB,CApBQ,CAwBR;;IACAP,MAAM,GAAG,IAAIuB,SAAJ,CAAcD,GAAd,CAAT;IACA,MAAME,WAAW,GAAG,IAAI1B,WAAJ,CAAgBE,MAAhB,CAApB,CA1BQ,CA2BR;;IACAa,IAAI,CAACY,SAAL,CAAeD,WAAf;IACAX,IAAI,CAACY,SAAL,CAAetB,QAAf;IACAA,QAAQ,CAACuB,GAAT;;IACJC,MAAM,CAACC,QAAP,GAAkB,YAAW;MACzBzB,QAAQ,CAACuB,GAAT;MACAb,IAAI,CAACgB,cAAL;IACH,CAHD;EAOH,CAtCQ,EAsCN,EAtCM,CAAT;EA0CA,oBACI;IAAA,uBACI;MAAK,KAAK,EAAE;QAACC,OAAO,EAAE,GAAV;QAAcC,MAAM,EAAE,GAAtB;QAA0BC,MAAM,EAAE;MAAlC,CAAZ;MAAA,uBACI;QAAK,EAAE,EAAC;MAAR;QAAA;QAAA;QAAA;MAAA;IADJ;MAAA;MAAA;MAAA;IAAA;EADJ,iBADJ;AAOH;;GArDuB5B,a;UAEiBT,S;;;KAFjBS,a"},"metadata":{},"sourceType":"module"}